{% extends "blog/base.html" %}
{% load embed_video_tags %}

{% block content %}
<style>
.infinite-item{
  display: none;
}
iframe, object, embed{
    max-width: 100%;
    
}
img{
  height: auto;
}
@media screen and (max-width: 768px) {
    iframe,img {
        max-width: 100% !important;
        width: auto !important;
        height: auto !important;
    }
    
}
@media only screen 
    and (min-device-width : 375px) 
    and (max-device-width : 825px) 
    and (orientation : landscape) 
 
{
  iframe,img {
        max-width: 100% !important;
        width: auto !important;
        height: auto !important;
    }
}
/* #button {

  display: inline-block;
  background-color: #FF9800;
  width: 50px;
  height: 50px;
  text-align: center;
  border-radius: 4px;
  position: fixed;
  bottom: 30px;
  right: 30px;
  transition: background-color .3s, 
    opacity .5s, visibility .5s;
  opacity: 0;
  visibility: hidden;
  z-index: 1000;
}
#button::after {
  content: "\f077";
  font-family: FontAwesome;
  font-weight: normal;
  font-style: normal;
  font-size: 2em;
  line-height: 50px;
  color: #fff;
}
#button:hover {
  cursor: pointer;
  background-color: #333;
}
#button:active {
  background-color: #555;
}
#button.show {
  opacity: 1;
  visibility: visible;
}

/* Styles for the content section */


@media (min-width: 500px) {
  
  #button {
    margin: 30px;
  }
} */
</style>  
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<div class="infinite-container text-center">
    {% for post in posts %}
      <div class="infinite-item">
        <h2>{{ post.title }}</h2>
        <br>
        <!-- The video tag: -->
{% video post.postvideo as my_video %}

{% video my_video "large" %}
{% endvideo %}

<!-- Or embed shortcut: -->
{% video my_video '800x600' %}
<br><br>
<h4>MyWork, by<a href="/user_detail/?day={{post.day.number}}&username={{post.author}}">
   {{ post.author }}
</a></h4>
<br>
        <!-- <p>
          <small>{{ post.author }} / {{ post.date_posted }}</small>
        </p> -->
        
        <img src="{{ post.postpic.url }}" width="960px" height="720px">
        <br><br>
<h4>Untitled, by<a href="/user_detail/?day={{post.day.number}}&username={{post.author}}">
   {{ post.author }}
</a></h4>
<br>
        <h6>{{ post.content|truncatechars:100 }}</h6><br>
      </div>

      <div class="infinite-item">
        <h2>{{ post.title }}</h2>
        <br>
        <!-- The video tag: -->
{% video post.postvideo as my_video %}

{% video my_video "large" %}
{% endvideo %}

<!-- Or embed shortcut: -->
{% video my_video '800x600' %}
<br><br>
<h4>MyWork, by<a href="/user_detail/?day={{post.day.number}}&username={{post.author}}">
   {{ post.author }}
</a></h4>
<br>
        <!-- <p>
          <small>{{ post.author }} / {{ post.date_posted }}</small>
        </p> -->
        
        <img src="{{ post.postpic.url }}" width="960px" height="720px">
        <br><br>
<h4>Untitled, by<a href="/user_detail/?day={{post.day.number}}&username={{post.author}}">
   {{ post.author }}
</a></h4>
<br>
        <h6>{{ post.content|truncatechars:100 }}</h6><br>
      </div>
      <div class="infinite-item">
        <h2>{{ post.title }}</h2>
        <br>
        <!-- The video tag: -->
{% video post.postvideo as my_video %}

{% video my_video "large" %}
{% endvideo %}

<!-- Or embed shortcut: -->
{% video my_video '800x600' %}
<br><br>
<h4>MyWork, by<a href="/user_detail/?day={{post.day.number}}&username={{post.author}}">
   {{ post.author }}
</a></h4>
<br>
        <!-- <p>
          <small>{{ post.author }} / {{ post.date_posted }}</small>
        </p> -->
        
        <img src="{{ post.postpic.url }}" width="960px" height="720px">
        <br><br>
<h4>Untitled, by<a href="/user_detail/?day={{post.day.number}}&username={{post.author}}">
   {{ post.author }}
</a></h4>
<br>
        <h6>{{ post.content|truncatechars:100 }}</h6><br>
      </div>
      <div class="infinite-item">
        <h2>{{ post.title }}</h2>
        <br>
        <!-- The video tag: -->
{% video post.postvideo as my_video %}

{% video my_video "large" %}
{% endvideo %}

<!-- Or embed shortcut: -->
{% video my_video '800x600' %}
<br><br>
<h4>MyWork, by<a href="/user_detail/?day={{post.day.number}}&username={{post.author}}">
   {{ post.author }}
</a></h4>
<br>
        <!-- <p>
          <small>{{ post.author }} / {{ post.date_posted }}</small>
        </p> -->
        
        <img src="{{ post.postpic.url }}" width="960px" height="720px">
        <br><br>
<h4>Untitled, by<a href="/user_detail/?day={{post.day.number}}&username={{post.author}}">
   {{ post.author }}
</a></h4>
<br>
        <h6>{{ post.content|truncatechars:100 }}</h6><br>
      </div>
      <div class="infinite-item">
        <h2>{{ post.title }}</h2>
        <br>
        <!-- The video tag: -->
{% video post.postvideo as my_video %}

{% video my_video "large" %}
{% endvideo %}

<!-- Or embed shortcut: -->
{% video my_video '800x600' %}
<br><br>
<h4>MyWork, by<a href="/user_detail/?day={{post.day.number}}&username={{post.author}}">
   {{ post.author }}
</a></h4>
<br>
        <!-- <p>
          <small>{{ post.author }} / {{ post.date_posted }}</small>
        </p> -->
        
        <img src="{{ post.postpic.url }}" width="960px" height="720px">
        <br><br>
<h4>Untitled, by<a href="/user_detail/?day={{post.day.number}}&username={{post.author}}">
   {{ post.author }}
</a></h4>
<br>
        <h6>{{ post.content|truncatechars:100 }}</h6><br>
      </div>
      <div class="infinite-item">
        <h2>{{ post.title }}</h2>
        <br>
        <!-- The video tag: -->
{% video post.postvideo as my_video %}

{% video my_video "large" %}
{% endvideo %}

<!-- Or embed shortcut: -->
{% video my_video '800x600' %}
<br><br>
<h4>MyWork, by<a href="/user_detail/?day={{post.day.number}}&username={{post.author}}">
   {{ post.author }}
</a></h4>
<br>
        <!-- <p>
          <small>{{ post.author }} / {{ post.date_posted }}</small>
        </p> -->
        
        <img src="{{ post.postpic.url }}" width="960px" height="720px">
        <br><br>
<h4>Untitled, by<a href="/user_detail/?day={{post.day.number}}&username={{post.author}}">
   {{ post.author }}
</a></h4>
<br>
        <h6>{{ post.content|truncatechars:100 }}</h6><br>
      </div>
      {% empty %}
  <div class="text-center">
    <h2>No Posts Found</h2>
  </div>
    {% endfor %}
  </div>
 
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

  <script>
    var count = 0;
    $(".infinite-item").slice(0, 1).show();

function load() {
        $(".infinite-item:hidden").slice(0, 1).slideDown();
        if ($(".infinite-item:hidden").length == 0) {
            count ++;
        }
        // $('html,body').animate({
        //     scrollTop: $(this).offset().top
        // }, 1500);
   
}
$(document.body).on('touchmove', onScroll); // for mobile
$(window).on('scroll', onScroll);

var addition_constant = 0;

// callback
function onScroll(){
    
    if(count === 0){
      var addition = ($(window).scrollTop() + window.innerHeight);

var scrollHeight = (document.body.scrollHeight - 1);
if (addition > scrollHeight && addition_constant < addition) {      
   $(window).unbind('scroll');
           load();
   }
    }
}
  </script>
{% endblock %}
